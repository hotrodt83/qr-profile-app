(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{2281:function(e,n,t){Promise.resolve().then(t.bind(t,3298))},3298:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return u}});var a=t(3827),i=t(4090),s=t(7907),r=t(4599);function u(){let e=(0,s.useRouter)(),n=(0,s.useSearchParams)(),t=n.get("next")||"/edit",u=n.get("mode"),[o,l]=(0,i.useState)("signup"===u?"signup":"signin"),c=(0,i.useMemo)(()=>(0,r.e)(),[]);(0,i.useEffect)(()=>{if(!window.location.hash)return;let n=n=>{n&&(window.history.replaceState(null,"",window.location.pathname+window.location.search),e.replace(t))};c.auth.getSession().then(e=>{let{data:{session:t}}=e;return n(t)});let{data:{subscription:a}}=c.auth.onAuthStateChange((e,t)=>{n(t)});return()=>a.unsubscribe()},[c.auth,t,e]);let[h,d]=(0,i.useState)(""),[m,p]=(0,i.useState)(""),[g,f]=(0,i.useState)(!1),[w,b]=(0,i.useState)(null);async function S(n){n.preventDefault(),f(!0),b(null);try{if("signup"===o){let e="".concat(window.location.origin,"/auth?next=").concat(encodeURIComponent(t)),{error:n}=await c.auth.signUp({email:h,password:m,options:e?{emailRedirectTo:e}:void 0});if(n)throw n;b("Account created. Check email if confirmation is enabled, then sign in.")}else{let{error:n}=await c.auth.signInWithPassword({email:h,password:m});if(n)throw n;e.replace(t);return}}catch(e){b(e instanceof Error?e.message:"Something went wrong")}finally{f(!1)}}return(0,a.jsx)("main",{className:"authPage",children:(0,a.jsxs)("div",{className:"authCard",children:[(0,a.jsx)("h1",{children:"Personal QR Profile"}),(0,a.jsx)("p",{className:"authSubtitle",children:"signin"===o?"Sign in to manage your profile":"Create an account to start managing your profile"}),(0,a.jsxs)("form",{onSubmit:S,className:"authForm",children:[(0,a.jsxs)("div",{className:"authField",children:[(0,a.jsx)("label",{htmlFor:"auth-email",children:"Email"}),(0,a.jsx)("input",{id:"auth-email",type:"email",value:h,onChange:e=>d(e.target.value),placeholder:"name@email.com",autoComplete:"email",required:!0})]}),(0,a.jsxs)("div",{className:"authField",children:[(0,a.jsx)("label",{htmlFor:"auth-password",children:"Password"}),(0,a.jsx)("input",{id:"auth-password",type:"password",value:m,onChange:e=>p(e.target.value),placeholder:"••••••••",autoComplete:"signin"===o?"current-password":"new-password",required:!0,minLength:6})]}),w?(0,a.jsx)("div",{className:"authMessage",children:w}):null,(0,a.jsx)("button",{type:"submit",disabled:g,className:"authBtnPrimary",children:g?"Working…":"signin"===o?"Sign in":"Create account"}),(0,a.jsx)("button",{type:"button",onClick:()=>l(e=>"signin"===e?"signup":"signin"),className:"authBtnSecondary",children:"signin"===o?"Need an account? Sign up":"Already have an account? Sign in"}),(0,a.jsx)("button",{type:"button",onClick:()=>e.push("/"),className:"authBack",children:"Back to home"}),(0,a.jsxs)("p",{className:"authTip",children:["Tip: after sign in you'll be redirected to ",(0,a.jsx)("span",{children:t})]})]})]})})}},4599:function(e,n,t){"use strict";t.d(n,{A:function(){return r},e:function(){return u}});var a=t(7688);let i="https://opqsvhuzitldddvkurpd.supabase.co",s="sb_publishable_mj_UG9I9lbzanA0PUKTJ_A_Z0_0yiWs";function r(){if(!i||!s)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY");return(0,a.eI)(i,s)}function u(){return r()}}},function(e){e.O(0,[436,971,69,744],function(){return e(e.s=2281)}),_N_E=e.O()}]);